/*!
 * @pixi/canvas-graphics - v6.2.1
 * Compiled Tue, 21 Dec 2021 19:56:15 UTC
 *
 * @pixi/canvas-graphics is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
this.PIXI=this.PIXI||{};var _pixi_canvas_graphics=function(e,t,i,a,r){"use strict";var n,o=function(){function e(){}return e.offsetPolygon=function(t,i){var a=[],r=t.length;i=e.isPolygonClockwise(t)?i:-1*i;for(var n=0;n<r;n+=2){var o=n-2;o<0&&(o+=r);var l=(n+2)%r,s=t[n]-t[o],h=t[n+1]-t[o+1],v=Math.sqrt(s*s+h*h);s/=v,h/=v;var g=-(h*=i),c=s*=i,p=[t[o]+g,t[o+1]+c],f=[t[n]+g,t[n+1]+c],u=t[l]-t[n],d=t[l+1]-t[n+1];u/=v=Math.sqrt(u*u+d*d),d/=v;var T=-(d*=i),y=u*=i,m=[t[n]+T,t[n+1]+y],x=[t[l]+T,t[l+1]+y],b=e.findIntersection(p[0],p[1],f[0],f[1],m[0],m[1],x[0],x[1]);b&&a.push.apply(a,b)}return a},e.findIntersection=function(e,t,i,a,r,n,o,l){var s=(l-n)*(i-e)-(o-r)*(a-t),h=(o-r)*(t-n)-(l-n)*(e-r);if(0===s)return 0===h&&0===(i-e)*(t-n)-(a-t)*(e-r)?[(e+i)/2,(t+a)/2]:null;var v=h/s;return[e+v*(i-e),t+v*(a-t)]},e.isPolygonClockwise=function(e){for(var t=0,i=0;i<e.length-2;i+=2)t+=(e[i+2]-e[i])*(e[i+3]+e[i+1]);return t>0},e}(),l=function(){function e(e){this._svgMatrix=null,this._tempMatrix=new i.Matrix,this.renderer=e}return e.prototype._calcCanvasStyle=function(e,r){var n;return e.texture&&e.texture.baseTexture!==t.Texture.WHITE.baseTexture?e.texture.valid?(n=a.canvasUtils.getTintedPattern(e.texture,r),this.setPatternTransform(n,e.matrix||i.Matrix.IDENTITY)):n="#808080":n="#"+("00000"+(0|r).toString(16)).substr(-6),n},e.prototype.render=function(e){var t=this.renderer,a=t.context,r=e.worldAlpha,n=e.transform.worldTransform;t.setContextTransform(n),t.setBlendMode(e.blendMode);for(var o,l,s=e.geometry.graphicsData,h=(e.tint>>16&255)/255,v=(e.tint>>8&255)/255,g=(255&e.tint)/255,c=0;c<s.length;c++){var p=s[c],f=p.shape,u=p.fillStyle,d=p.lineStyle,T=0|p.fillStyle.color,y=0|p.lineStyle.color;if(p.matrix&&t.setContextTransform(n.copyTo(this._tempMatrix).append(p.matrix)),u.visible){var m=((T>>16&255)/255*h*255<<16)+((T>>8&255)/255*v*255<<8)+(255&T)/255*g*255;o=this._calcCanvasStyle(u,m)}if(d.visible){var x=((y>>16&255)/255*h*255<<16)+((y>>8&255)/255*v*255<<8)+(255&y)/255*g*255;l=this._calcCanvasStyle(d,x)}if(a.lineWidth=d.width,a.lineCap=d.cap,a.lineJoin=d.join,a.miterLimit=d.miterLimit,p.type===i.SHAPES.POLY){a.beginPath();var b=(R=f).points,P=p.holes,S=void 0,M=void 0,C=void 0,_=void 0,w=void 0;a.moveTo(b[0],b[1]);for(var I=2;I<b.length;I+=2)a.lineTo(b[I],b[I+1]);if(R.closeStroke&&a.closePath(),P.length>0){w=[],S=0,C=b[0],_=b[1];for(I=2;I+2<b.length;I+=2)S+=(b[I]-C)*(b[I+3]-_)-(b[I+2]-C)*(b[I+1]-_);for(var k=0;k<P.length;k++)if(b=P[k].shape.points){M=0,C=b[0],_=b[1];for(I=2;I+2<b.length;I+=2)M+=(b[I]-C)*(b[I+3]-_)-(b[I+2]-C)*(b[I+1]-_);if(M*S<0){a.moveTo(b[0],b[1]);for(I=2;I<b.length;I+=2)a.lineTo(b[I],b[I+1])}else{a.moveTo(b[b.length-2],b[b.length-1]);for(I=b.length-4;I>=0;I-=2)a.lineTo(b[I],b[I+1])}P[k].shape.closeStroke&&a.closePath(),w[k]=M*S<0}}u.visible&&(a.globalAlpha=u.alpha*r,a.fillStyle=o,a.fill()),d.visible&&this.paintPolygonStroke(R,d,l,P,w,r,a)}else if(p.type===i.SHAPES.RECT){var R=f;if(u.visible&&(a.globalAlpha=u.alpha*r,a.fillStyle=o,a.fillRect(R.x,R.y,R.width,R.height)),d.visible){var A=d.width*(.5-(1-d.alignment)),E=R.width+2*A,q=R.height+2*A;a.globalAlpha=d.alpha*r,a.strokeStyle=l,a.strokeRect(R.x-A,R.y-A,E,q)}}else if(p.type===i.SHAPES.CIRC){R=f;if(a.beginPath(),a.arc(R.x,R.y,R.radius,0,2*Math.PI),a.closePath(),u.visible&&(a.globalAlpha=u.alpha*r,a.fillStyle=o,a.fill()),d.visible){if(.5!==d.alignment){A=d.width*(.5-(1-d.alignment));a.beginPath(),a.arc(R.x,R.y,R.radius+A,0,2*Math.PI),a.closePath()}a.globalAlpha=d.alpha*r,a.strokeStyle=l,a.stroke()}}else if(p.type===i.SHAPES.ELIP){R=f;if((V=1===d.alignment)||this.paintEllipse(R,u,d,o,r,a),d.visible){if(.5!==d.alignment){A=d.width*(.5-(1-d.alignment));var z=2*(R.width+A),G=2*(R.height+A),X=R.x-z/2,H=R.y-G/2,L=z/2*.5522848,D=G/2*.5522848,j=X+z,B=H+G,N=X+z/2,O=H+G/2;a.beginPath(),a.moveTo(X,O),a.bezierCurveTo(X,O-D,N-L,H,N,H),a.bezierCurveTo(N+L,H,j,O-D,j,O),a.bezierCurveTo(j,O+D,N+L,B,N,B),a.bezierCurveTo(N-L,B,X,O+D,X,O),a.closePath()}a.globalAlpha=d.alpha*r,a.strokeStyle=l,a.stroke()}V&&this.paintEllipse(R,u,d,o,r,a)}else if(p.type===i.SHAPES.RREC){var V;R=f;if((V=1===d.alignment)||this.paintRoundedRectangle(R,u,d,o,r,a),d.visible){if(.5!==d.alignment){E=R.width,q=R.height,A=d.width*(.5-(1-d.alignment));var W=R.x-A,Y=R.y-A,J=R.width+2*A,U=R.height+2*A,F=A*(d.alignment>=1?Math.min(J/E,U/q):Math.min(E/J,q/U)),K=R.radius+F,Q=Math.min(J,U)/2;K=K>Q?Q:K,a.beginPath(),a.moveTo(W,Y+K),a.lineTo(W,Y+U-K),a.quadraticCurveTo(W,Y+U,W+K,Y+U),a.lineTo(W+J-K,Y+U),a.quadraticCurveTo(W+J,Y+U,W+J,Y+U-K),a.lineTo(W+J,Y+K),a.quadraticCurveTo(W+J,Y,W+J-K,Y),a.lineTo(W+K,Y),a.quadraticCurveTo(W,Y,W,Y+K),a.closePath()}a.globalAlpha=d.alpha*r,a.strokeStyle=l,a.stroke()}V&&this.paintRoundedRectangle(R,u,d,o,r,a)}}},e.prototype.paintPolygonStroke=function(e,t,i,a,r,n,l){if(.5!==t.alignment){var s=t.width*(.5-(1-t.alignment)),h=o.offsetPolygon(e.points,s),v=void 0;l.beginPath(),l.moveTo(h[0],h[1]);for(var g=2;g<h.length;g+=2)l.lineTo(h[g],h[g+1]);e.closeStroke&&l.closePath();for(var c=0;c<a.length;c++){if(v=a[c].shape.points,h=o.offsetPolygon(v,s),r[c]){l.moveTo(h[0],h[1]);for(g=2;g<h.length;g+=2)l.lineTo(h[g],h[g+1])}else{l.moveTo(h[h.length-2],h[h.length-1]);for(g=h.length-4;g>=0;g-=2)l.lineTo(h[g],h[g+1])}a[c].shape.closeStroke&&l.closePath()}}l.globalAlpha=t.alpha*n,l.strokeStyle=i,l.stroke()},e.prototype.paintEllipse=function(e,t,i,a,r,n){var o=2*e.width,l=2*e.height,s=e.x-o/2,h=e.y-l/2,v=o/2*.5522848,g=l/2*.5522848,c=s+o,p=h+l,f=s+o/2,u=h+l/2;n.beginPath(),n.moveTo(s,u),n.bezierCurveTo(s,u-g,f-v,h,f,h),n.bezierCurveTo(f+v,h,c,u-g,c,u),n.bezierCurveTo(c,u+g,f+v,p,f,p),n.bezierCurveTo(f-v,p,s,u+g,s,u),n.closePath(),0===i.alignment&&n.clip(),t.visible&&(n.globalAlpha=t.alpha*r,n.fillStyle=a,n.fill())},e.prototype.paintRoundedRectangle=function(e,t,i,a,r,n){var o=e.x,l=e.y,s=e.width,h=e.height,v=e.radius,g=Math.min(s,h)/2;v=v>g?g:v,n.beginPath(),n.moveTo(o,l+v),n.lineTo(o,l+h-v),n.quadraticCurveTo(o,l+h,o+v,l+h),n.lineTo(o+s-v,l+h),n.quadraticCurveTo(o+s,l+h,o+s,l+h-v),n.lineTo(o+s,l+v),n.quadraticCurveTo(o+s,l,o+s-v,l),n.lineTo(o+v,l),n.quadraticCurveTo(o,l,o,l+v),n.closePath(),0===i.alignment&&n.clip(),t.visible&&(n.globalAlpha=t.alpha*r,n.fillStyle=a,n.fill())},e.prototype.setPatternTransform=function(e,t){if(!1!==this._svgMatrix){if(!this._svgMatrix){var i=document.createElementNS("http://www.w3.org/2000/svg","svg");if(i&&i.createSVGMatrix&&(this._svgMatrix=i.createSVGMatrix()),!this._svgMatrix||!e.setTransform)return void(this._svgMatrix=!1)}this._svgMatrix.a=t.a,this._svgMatrix.b=t.b,this._svgMatrix.c=t.c,this._svgMatrix.d=t.d,this._svgMatrix.e=t.tx,this._svgMatrix.f=t.ty,e.setTransform(this._svgMatrix.inverse())}},e.prototype.destroy=function(){this.renderer=null,this._svgMatrix=null,this._tempMatrix=null},e}(),s=new i.Matrix;return r.Graphics.prototype.generateCanvasTexture=function(e,i){void 0===i&&(i=1);var r=this.getLocalBounds(),o=t.RenderTexture.create({width:r.width,height:r.height,scaleMode:e,resolution:i});n||(n=new a.CanvasRenderer),this.transform.updateLocalTransform(),this.transform.localTransform.copyTo(s),s.invert(),s.tx-=r.x,s.ty-=r.y,n.render(this,{renderTexture:o,clear:!0,transform:s});var l=t.Texture.from(o.baseTexture._canvasRenderTarget.canvas,{scaleMode:e});return l.baseTexture.setResolution(i),l},r.Graphics.prototype.cachedGraphicsData=[],r.Graphics.prototype._renderCanvas=function(e){!0!==this.isMask&&(this.finishPoly(),e.plugins.graphics.render(this))},e.CanvasGraphicsRenderer=l,e}({},PIXI,PIXI,PIXI,PIXI);Object.assign(this.PIXI,_pixi_canvas_graphics);
//# sourceMappingURL=canvas-graphics.min.js.map
